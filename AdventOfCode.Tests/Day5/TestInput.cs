using System.Diagnostics;
using System.Windows.Markup;
using Xunit.Abstractions;
using Xunit.Sdk;

namespace AdventOfCode.Tests.Day5;

public class TestInput
{
    public const string Example =
        "47|53\n97|13\n97|61\n97|47\n75|29\n61|13\n75|53\n29|13\n97|29\n53|29\n61|53\n97|53\n61|29\n47|13\n75|47\n97|75\n47|61\n75|61\n47|29\n75|13\n53|13\n\n75,47,61,53,29\n97,61,53,29,13\n75,29,13\n75,97,47,61,53\n61,13,29\n97,13,75,29,47";

    public const string Input =
        "66|44\n14|81\n14|63\n95|17\n95|47\n95|81\n31|66\n31|78\n31|79\n31|87\n32|57\n32|66\n32|42\n32|19\n32|47\n13|64\n13|95\n13|19\n13|31\n13|81\n13|37\n52|87\n52|84\n52|37\n52|36\n52|67\n52|66\n52|81\n21|67\n21|72\n21|76\n21|36\n21|25\n21|82\n21|77\n21|68\n34|95\n34|93\n34|31\n34|74\n34|84\n34|32\n34|52\n34|36\n34|49\n48|49\n48|29\n48|44\n48|54\n48|34\n48|38\n48|76\n48|89\n48|85\n48|14\n75|93\n75|57\n75|68\n75|59\n75|19\n75|66\n75|13\n75|63\n75|74\n75|31\n75|73\n59|98\n59|17\n59|47\n59|64\n59|52\n59|29\n59|89\n59|42\n59|72\n59|44\n59|79\n59|94\n57|87\n57|91\n57|37\n57|81\n57|48\n57|54\n57|47\n57|64\n57|21\n57|42\n57|93\n57|94\n57|66\n87|66\n87|79\n87|84\n87|37\n87|73\n87|64\n87|22\n87|94\n87|48\n87|42\n87|19\n87|82\n87|89\n87|17\n73|79\n73|92\n73|82\n73|52\n73|49\n73|29\n73|44\n73|47\n73|22\n73|64\n73|67\n73|72\n73|98\n73|54\n73|17\n89|98\n89|38\n89|36\n89|49\n89|34\n89|92\n89|25\n89|72\n89|75\n89|68\n89|74\n89|14\n89|44\n89|95\n89|13\n89|52\n42|67\n42|17\n42|14\n42|79\n42|21\n42|29\n42|54\n42|89\n42|38\n42|75\n42|72\n42|22\n42|64\n42|46\n42|76\n42|49\n42|92\n22|68\n22|44\n22|82\n22|54\n22|67\n22|76\n22|36\n22|13\n22|77\n22|34\n22|29\n22|92\n22|31\n22|21\n22|74\n22|49\n22|14\n22|72\n82|57\n82|13\n82|32\n82|34\n82|98\n82|74\n82|29\n82|49\n82|76\n82|46\n82|44\n82|89\n82|31\n82|92\n82|77\n82|72\n82|14\n82|36\n82|52\n67|36\n67|19\n67|63\n67|31\n67|81\n67|57\n67|77\n67|87\n67|78\n67|13\n67|95\n67|37\n67|76\n67|84\n67|75\n67|59\n67|66\n67|32\n67|68\n67|25\n77|95\n77|32\n77|13\n77|87\n77|57\n77|91\n77|31\n77|19\n77|93\n77|42\n77|64\n77|47\n77|84\n77|25\n77|78\n77|63\n77|73\n77|81\n77|59\n77|66\n77|74\n92|66\n92|95\n92|81\n92|84\n92|13\n92|78\n92|76\n92|75\n92|19\n92|77\n92|87\n92|36\n92|59\n92|63\n92|93\n92|94\n92|31\n92|74\n92|57\n92|68\n92|37\n92|32\n79|67\n79|98\n79|49\n79|82\n79|68\n79|34\n79|75\n79|29\n79|14\n79|89\n79|44\n79|74\n79|22\n79|52\n79|92\n79|46\n79|21\n79|54\n79|85\n79|72\n79|13\n79|38\n79|77\n84|21\n84|82\n84|94\n84|48\n84|59\n84|98\n84|29\n84|47\n84|81\n84|17\n84|89\n84|44\n84|91\n84|37\n84|64\n84|42\n84|85\n84|19\n84|22\n84|73\n84|66\n84|54\n84|63\n84|79\n64|89\n64|17\n64|67\n64|21\n64|44\n64|68\n64|46\n64|82\n64|75\n64|49\n64|76\n64|48\n64|54\n64|14\n64|85\n64|22\n64|98\n64|29\n64|38\n64|34\n64|72\n64|79\n64|92\n64|52\n19|91\n19|94\n19|73\n19|89\n19|29\n19|48\n19|44\n19|64\n19|66\n19|37\n19|98\n19|82\n19|21\n19|59\n19|17\n19|47\n19|49\n19|72\n19|54\n19|79\n19|22\n19|85\n19|34\n19|42\n98|29\n98|74\n98|46\n98|14\n98|34\n98|36\n98|67\n98|44\n98|49\n98|75\n98|38\n98|77\n98|32\n98|78\n98|52\n98|31\n98|57\n98|72\n98|92\n98|76\n98|95\n98|68\n98|25\n98|13\n94|21\n94|85\n94|38\n94|79\n94|73\n94|47\n94|29\n94|72\n94|54\n94|34\n94|17\n94|48\n94|46\n94|44\n94|49\n94|64\n94|42\n94|89\n94|52\n94|91\n94|22\n94|82\n94|67\n94|98\n47|42\n47|98\n47|64\n47|46\n47|48\n47|17\n47|34\n47|52\n47|89\n47|29\n47|67\n47|92\n47|54\n47|44\n47|38\n47|79\n47|22\n47|72\n47|75\n47|49\n47|14\n47|85\n47|21\n47|82\n54|74\n54|52\n54|82\n54|34\n54|68\n54|31\n54|77\n54|21\n54|49\n54|29\n54|75\n54|46\n54|44\n54|72\n54|38\n54|76\n54|13\n54|98\n54|36\n54|89\n54|25\n54|67\n54|14\n54|92\n91|79\n91|22\n91|82\n91|89\n91|54\n91|21\n91|47\n91|44\n91|67\n91|73\n91|34\n91|92\n91|98\n91|49\n91|72\n91|29\n91|85\n91|38\n91|52\n91|48\n91|64\n91|17\n91|42\n91|46\n46|19\n46|75\n46|36\n46|31\n46|57\n46|13\n46|25\n46|84\n46|81\n46|67\n46|52\n46|32\n46|14\n46|68\n46|78\n46|93\n46|74\n46|76\n46|92\n46|77\n46|95\n46|87\n46|63\n46|66\n76|68\n76|36\n76|25\n76|57\n76|87\n76|31\n76|73\n76|19\n76|91\n76|66\n76|81\n76|84\n76|37\n76|32\n76|63\n76|78\n76|95\n76|13\n76|74\n76|77\n76|59\n76|47\n76|94\n76|93\n68|84\n68|91\n68|73\n68|63\n68|95\n68|31\n68|19\n68|59\n68|66\n68|25\n68|36\n68|42\n68|94\n68|93\n68|13\n68|57\n68|37\n68|32\n68|87\n68|47\n68|78\n68|74\n68|81\n68|77\n72|31\n72|36\n72|84\n72|87\n72|63\n72|93\n72|76\n72|46\n72|25\n72|14\n72|77\n72|32\n72|49\n72|95\n72|78\n72|13\n72|57\n72|38\n72|67\n72|68\n72|74\n72|92\n72|52\n72|75\n85|21\n85|92\n85|72\n85|46\n85|54\n85|44\n85|74\n85|13\n85|98\n85|14\n85|76\n85|31\n85|77\n85|22\n85|68\n85|89\n85|34\n85|29\n85|38\n85|75\n85|52\n85|67\n85|82\n85|49\n25|59\n25|48\n25|78\n25|93\n25|95\n25|63\n25|32\n25|94\n25|73\n25|81\n25|85\n25|66\n25|37\n25|22\n25|19\n25|42\n25|79\n25|64\n25|84\n25|17\n25|91\n25|47\n25|87\n25|57\n37|46\n37|44\n37|34\n37|82\n37|59\n37|79\n37|48\n37|94\n37|64\n37|73\n37|91\n37|47\n37|98\n37|38\n37|42\n37|49\n37|89\n37|17\n37|22\n37|85\n37|29\n37|21\n37|72\n37|54\n36|95\n36|85\n36|19\n36|78\n36|32\n36|37\n36|63\n36|57\n36|25\n36|91\n36|87\n36|66\n36|64\n36|17\n36|94\n36|42\n36|48\n36|84\n36|93\n36|73\n36|79\n36|59\n36|47\n36|81\n78|66\n78|19\n78|42\n78|82\n78|21\n78|79\n78|81\n78|37\n78|84\n78|89\n78|94\n78|17\n78|63\n78|91\n78|87\n78|93\n78|54\n78|48\n78|85\n78|22\n78|73\n78|64\n78|59\n78|47\n74|81\n74|84\n74|87\n74|19\n74|36\n74|42\n74|13\n74|59\n74|32\n74|64\n74|66\n74|91\n74|78\n74|94\n74|63\n74|25\n74|95\n74|47\n74|37\n74|57\n74|93\n74|17\n74|73\n74|31\n63|81\n63|64\n63|22\n63|94\n63|37\n63|73\n63|47\n63|44\n63|82\n63|89\n63|66\n63|54\n63|98\n63|21\n63|59\n63|29\n63|79\n63|19\n63|91\n63|17\n63|85\n63|42\n63|34\n63|48\n93|94\n93|54\n93|81\n93|84\n93|98\n93|17\n93|64\n93|85\n93|37\n93|91\n93|89\n93|66\n93|82\n93|63\n93|47\n93|42\n93|22\n93|48\n93|79\n93|19\n93|73\n93|59\n93|21\n93|44\n81|64\n81|48\n81|21\n81|79\n81|89\n81|44\n81|17\n81|98\n81|72\n81|34\n81|22\n81|59\n81|94\n81|37\n81|42\n81|91\n81|54\n81|73\n81|29\n81|19\n81|85\n81|66\n81|47\n81|82\n17|34\n17|38\n17|85\n17|46\n17|22\n17|79\n17|89\n17|29\n17|98\n17|14\n17|82\n17|75\n17|49\n17|76\n17|44\n17|68\n17|77\n17|67\n17|54\n17|48\n17|92\n17|72\n17|21\n17|52\n38|63\n38|31\n38|32\n38|92\n38|95\n38|81\n38|84\n38|68\n38|87\n38|67\n38|46\n38|19\n38|52\n38|13\n38|93\n38|75\n38|76\n38|74\n38|25\n38|36\n38|77\n38|78\n38|57\n38|14\n29|49\n29|68\n29|25\n29|77\n29|57\n29|52\n29|92\n29|95\n29|76\n29|14\n29|38\n29|75\n29|74\n29|72\n29|13\n29|32\n29|93\n29|31\n29|36\n29|78\n29|46\n29|67\n29|34\n29|87\n49|31\n49|74\n49|57\n49|63\n49|93\n49|75\n49|68\n49|38\n49|67\n49|46\n49|52\n49|36\n49|77\n49|81\n49|84\n49|76\n49|25\n49|14\n49|32\n49|92\n49|78\n49|95\n49|13\n49|87\n44|72\n44|67\n44|75\n44|52\n44|25\n44|32\n44|14\n44|57\n44|78\n44|34\n44|76\n44|95\n44|77\n44|92\n44|74\n44|87\n44|36\n44|29\n44|49\n44|38\n44|13\n44|31\n44|46\n44|68\n66|79\n66|94\n66|98\n66|21\n66|48\n66|37\n66|49\n66|85\n66|38\n66|91\n66|73\n66|89\n66|29\n66|59\n66|64\n66|82\n66|54\n66|17\n66|42\n66|72\n66|34\n66|47\n66|22\n14|74\n14|32\n14|57\n14|93\n14|59\n14|76\n14|19\n14|36\n14|77\n14|68\n14|95\n14|25\n14|91\n14|66\n14|87\n14|94\n14|78\n14|75\n14|13\n14|37\n14|31\n14|84\n95|19\n95|87\n95|91\n95|82\n95|94\n95|78\n95|42\n95|93\n95|54\n95|37\n95|21\n95|59\n95|84\n95|66\n95|85\n95|64\n95|79\n95|63\n95|73\n95|48\n95|22\n31|32\n31|64\n31|91\n31|73\n31|59\n31|63\n31|81\n31|37\n31|93\n31|57\n31|94\n31|36\n31|95\n31|84\n31|19\n31|48\n31|25\n31|47\n31|17\n31|42\n32|78\n32|93\n32|94\n32|48\n32|84\n32|91\n32|37\n32|17\n32|73\n32|54\n32|85\n32|95\n32|64\n32|22\n32|63\n32|59\n32|81\n32|79\n32|87\n13|63\n13|94\n13|47\n13|32\n13|48\n13|25\n13|66\n13|78\n13|36\n13|42\n13|57\n13|17\n13|93\n13|91\n13|87\n13|84\n13|73\n13|59\n52|75\n52|19\n52|14\n52|13\n52|76\n52|95\n52|68\n52|74\n52|25\n52|32\n52|57\n52|63\n52|93\n52|92\n52|78\n52|77\n52|31\n21|52\n21|34\n21|44\n21|74\n21|14\n21|29\n21|46\n21|75\n21|89\n21|32\n21|49\n21|92\n21|13\n21|31\n21|38\n21|98\n34|75\n34|92\n34|76\n34|67\n34|14\n34|68\n34|46\n34|77\n34|38\n34|13\n34|87\n34|25\n34|78\n34|57\n34|72\n48|82\n48|72\n48|68\n48|79\n48|75\n48|77\n48|74\n48|22\n48|67\n48|21\n48|46\n48|92\n48|98\n48|52\n75|84\n75|95\n75|78\n75|87\n75|81\n75|32\n75|77\n75|37\n75|76\n75|91\n75|25\n75|36\n75|94\n59|48\n59|91\n59|54\n59|46\n59|22\n59|49\n59|73\n59|21\n59|34\n59|38\n59|85\n59|82\n57|17\n57|78\n57|95\n57|85\n57|84\n57|79\n57|19\n57|22\n57|63\n57|73\n57|59\n87|59\n87|63\n87|21\n87|91\n87|98\n87|47\n87|93\n87|81\n87|54\n87|85\n73|42\n73|38\n73|89\n73|85\n73|21\n73|14\n73|34\n73|46\n73|48\n89|57\n89|67\n89|31\n89|46\n89|29\n89|77\n89|32\n89|76\n42|48\n42|52\n42|98\n42|34\n42|82\n42|44\n42|85\n22|38\n22|75\n22|52\n22|98\n22|89\n22|46\n82|25\n82|75\n82|68\n82|67\n82|38\n67|93\n67|74\n67|92\n67|14\n77|36\n77|37\n77|94\n92|25\n92|14\n79|76\n\n93,36,64,57,94,66,13,32,37,78,73,19,25,84,17,31,87,47,42,59,81,91,95\n31,14,72,52,46,38,49,76,74,22,98,68,29,75,89,21,77\n21,25,67,34,75,29,52\n34,72,85,91,42,29,82,98,19,79,44,47,89\n42,17,79,85,54,21,89,98,34,72,38,92,75\n74,13,31,36,25,63,37,59,64\n95,92,75,77,46\n36,78,84,81,66,59,91,47,64\n54,82,29,49,38\n73,42,64,17,48,79,85,82,98,29,72,49,52,67,92\n32,79,37,84,59,64,22,66,57,78,93,85,42,95,17\n82,89,98,44,29,34,49,38,52,92,76,13,32\n95,78,93,84,81,19,94,73,47,64,17,48,21\n36,25,32,78,87,93,84,63,81,66,59,94,91,47,42,64,17,48,79\n44,29,49,46,92,76,77,74,13,25,32\n48,85,22,89,44,29,34,46,52,92,14,75,77\n44,54,19,73,22,59,91,82,48,17,79,85,42,66,47,94,21,98,89,81,29,64,63\n36,57,87,93,63,19,66,59,94,91,73,47,42,64,17,48,79\n74,36,78,13,95,67,49,31,25,92,32\n64,92,73,72,22,79,44,21,89,52,49,48,85,54,38,98,82,47,17,29,34,42,46\n36,34,31,74,77,49,52,68,76,72,46,82,92,98,67,21,89,54,29\n46,92,14,75,76,77,13,31,25,32,57,95,87,63,19\n77,74,31,36,25,32,57,95,93,63,81,66,37,59,94,91,42\n47,85,22,54,21,89,44,29,52,67,14\n48,22,54,21,89,98,44,72,46,52,67,92,76,68,77\n37,42,64,22,29,34,38\n19,17,93,81,87,21,85,48,37,91,59,47,66,94,22,54,42,64,84\n68,29,34,98,75,79,72,82,85,44,52,77,48\n72,38,52,14,77,74,57,93,84\n29,72,49,46,52,14,13,36,57\n54,85,34,72,67,76,17,75,82,21,46,49,14,89,44,22,68,79,52,38,29\n81,19,37,59,94,91,73,47,48,85,22,54,21,89,44,29,34\n77,13,87,49,29,46,25\n84,94,37,95,75,68,66,59,25,76,74,19,31\n22,82,29,14,77,74,31\n19,42,57,95,94,63,84,47,78,85,93,79,17,73,87\n76,21,44,31,75,68,34,29,52,67,82,46,38,72,74\n75,14,57,74,95\n72,87,76,46,14,38,84\n94,95,85,84,32,87,17,47,22,19,93,48,59,63,57,79,78,91,37\n34,64,49,72,44,89,17,21,79,66,94,37,47,22,85,98,29,54,59,91,48,82,73\n37,63,36,13,93,14,25,68,76,31,81,87,78\n44,82,46,89,67,92,22,73,17\n68,31,57,78,66,91,47\n44,29,34,52,92,68,74,13,36,25,32,57,78\n54,34,72,44,31,13,21,22,75\n25,57,93,19,37,17,85\n54,82,42,59,93,21,79,22,19,78,91,17,66,85,47\n77,31,36,25,32,57,95,78,87,63,81,66,37,59,91,47,42\n52,94,17,82,29,85,79,49,47,64,73,91,72,22,48,21,34,38,89,54,42\n76,77,98,72,34,92,95\n14,63,49,32,68,57,78\n89,98,29,38,46,52,67,31,36,32,57\n98,29,34,72,49,38,52,92,14,76,68,74,13,25,95\n48,22,66,84,73,21,54,89,93,85,59,91,82,98,79,42,19,94,17,63,37\n87,54,89,85,66,47,91\n66,59,94,91,42,22,89,44,29,72,49\n63,81,19,37,59,94,91,73,47,42,64,79,85,22,21,98,29\n82,38,29,54,44,89,75,67,42,85,52,48,64,21,92,72,46,98,49,17,34\n57,94,81,87,37,42,36,84,19,63,48,95,17,64,32,66,73,91,93\n82,44,72,49,38,75,76,68,13,36,32\n67,92,75,76,68,74,13,31,32,57,95,78,87,93,63,81,19,66,37\n92,14,75,76,74,13,36,25,32,57,95,78,87,93,84,63,81,19,66,37,59\n72,59,42,37,38,48,64,34,21,29,17\n25,46,31,95,87,76,75,32,74,67,29,36,13,49,72,14,52\n36,81,63,77,74,57,42,95,87,78,94,73,19,91,31,59,84\n78,87,81,73,42,64,48,79,82\n17,48,79,85,22,54,82,89,98,44,34,72,49,67,75,76,68\n46,52,67,92,14,75,76,68,77,74,13,31,36,32,57,95,78,87,93,84,63,81,19\n93,84,63,81,19,66,37,59,94,91,73,47,42,64,17,48,79,22,54,21,82,89,98\n21,34,29,89,67,48,75,79,85,98,54,64,76,14,44,82,22\n94,81,42,22,21,84,66,85,98,59,44\n66,63,93,77,57,84,78,31,13,74,81,14,76,25,19,95,37,32,75,36,59,87,92\n94,47,64,17,48,79,85,21,82,89,98,29,34,72,49,46,52\n52,67,92,14,75,77,31,32,57,63,66\n38,67,31,68,46,44,29,98,74,92,72,34,36,49,75,77,32,52,82\n92,14,75,68,77,13,25,32,78,87,93,84,19,66,59\n22,37,54,21,42,63,78,91,93,19,66,87,47\n31,36,25,32,57,95,93,19,73,47,48\n91,94,17,79,21,73,29,72,59,34,46\n75,98,92,76,25,46,89,44,31,13,14,29,38,21,34,74,82,72,68,77,67\n95,78,87,81,66,37,94,47,42,17,48,79,21\n59,72,42,85,73,29,79,17,49,54,82\n59,42,48,79,85\n81,13,77,78,31,68,74,59,25,84,92,76,66,14,19,57,37\n76,81,78,36,59,73,13,87,57\n34,49,38,46,52,67,92,14,75,76,68,77,74,13,31,36,25,32,57,95,78,87,93\n89,92,38,98,13,52,76,77,57,74,75,36,32,25,72\n81,37,94,42,48,79,85,22,54\n25,32,57,78,93,84,81,19,66,37,59,94,91,73,47,42,64,17,48,79,85\n48,79,85,22,54,21,82,89,98,44,29,34,72,49,38,46,52,67,92,14,75,68,77\n98,47,17,29,54,82,89,19,91,73,66,48,94,79,64,72,21,34,59\n31,13,54,98,74,49,36\n54,21,82,72,42,47,91,89,49,66,94,64,17,85,22,48,59,98,29,73,79\n94,98,59,42,91,48,17,82,37,38,72,49,54\n81,19,37,47,79,85,89,44,34\n84,37,91,63,59\n46,67,92,68,77,31,36,25,57,87,93,84,63,81,19\n73,63,85,82,91,81,44,66,94,98,79,54,89,42,19,47,29,17,21,48,59\n76,81,68,74,93,19,37,32,94,13,14,87,36,78,95,25,75\n72,49,38,46,67,92,14,75,76,68,77,74,13,31,36,25,32,57,95,78,87,93,84\n66,37,59,94,17,21,44,29,49\n32,19,87,47,81,37,73,57,48,64,36,91,63,31,84\n14,34,95,76,87,57,36\n52,67,92,14,75,76,68,77,74,13,31,36,32,57,95,78,87,93,84,63,81,19,66\n59,54,85,64,84,63,66,91,93,37,47,95,17\n44,29,34,72,49,38,67,92,14,76,68,77,74,31,36,25,32,57,78\n72,67,46,52,95,87,74,76,75,13,25,38,34,78,77\n82,91,64,29,47,48,37,63,79,85,19,81,89,44,98,17,54\n36,72,34,32,75,77,92,25,52\n42,47,91,81,57,37,32,94,77,19,66,36,84,13,93,95,59,78,25\n19,66,94,73,47,82,89,34,72\n66,48,37,57,42\n74,31,25,57,95,78,87,93,63,66,37,59,94,91,73,47,64\n92,76,77,31,36,57,84,63,59\n29,49,14,68,77,13,31,57,87\n19,37,67,63,66,81,25,32,31\n98,44,29,34,72,38,52,67,92,14,75,68,77,74,13,25,32,57,95\n17,85,22,21,89,44,72,38,46,52,92,14,68\n42,82,22,67,72,29,14,47,52\n57,73,59,81,36,77,25,95,63,78,84,37,31,66,74,47,91,93,32,42,94\n85,54,89,44,34,46,75,74,13\n13,36,25,32,19,73,17\n36,25,32,57,95,78,87,93,63,81,19,66,37,59,94,91,73,47,42,64,17,48,79\n22,54,89,44,29,72,49,46,52,67,92,76,77,74,31\n93,84,59,73,47,42,64,85,82\n13,31,36,32,78,87,93,19,37,94,91,47,42,64,17\n79,85,22,54,21,82,89,98,44,29,34,72,49,38,46,52,67,92,14,75,76,68,77\n54,44,72,22,68,48,52,29,77\n38,52,67,14,76,77,74,25,32,57,95,87,81\n63,98,89,21,84,44,91,19,94,22,17,82,79,64,42,54,47\n14,49,54,67,72,85,82,29,68,21,98,38,52,44,79,34,74,76,77,46,92,22,89\n59,19,29,72,79,89,44,37,21,17,73\n19,66,94,91,42,79,85,22,54,89,98,29,34\n73,47,64,17,79,85,21,89,98,44,29,34,72,49,38,46,52,67,92\n72,38,14,32,57,95,84\n44,21,14,77,49,98,25,74,72\n34,47,46,48,82,14,52,72,29,38,54,44,49\n89,98,29,49,38,67,14,68,31\n17,42,22,85,73,38,79,92,47\n25,87,19,66,37,91,42,64,17,79,85\n52,67,92,76,77,74,13,25,32,95,78,87,84,19,66\n93,63,94,47,42,64,48,85,22,82,98\n13,31,36,25,57,95,78,87,93,84,63,81,66,37,59,91,73,42,17\n78,84,63,81,19,66,37,59,91,73,47,64,17,48,79,54,82\n81,19,66,92,77,76,75,67,93,57,74,84,14,87,95,13,25,68,32,36,52,63,31\n74,13,31,36,25,32,57,78,87,84,63,81,19,37,59,94,91,73,47,42,64\n75,93,78,92,34,95,87,49,13\n42,64,17,48,85,22,54,21,82,89,98,44,29,34,67,92,75\n91,98,21,47,89,94,22,81,79,73,63,29,66\n68,77,13,31,36,25,32,57,95,87,93,84,63,81,19,66,37,94,91,73,47\n47,64,17,48,44,38,46\n93,68,75,67,63,92,14,37,77,74,81,13,57,95,76\n87,66,19,63,84\n19,94,76,66,78,93,63,68,74,37,14\n42,47,59,32,37,78,57,31,63,87,84,48,91,66,81,25,64,19,95,17,93\n68,76,13,14,78,95,52,72,25\n36,67,82,52,29,68,21,89,49\n75,76,68,77,74,13,31,36,25,78,87,93,84,63,81,59,91\n82,89,98,44,29,34,72,38,46,52,67,92,14,75,76,68,77,74,13,31,36,25,32\n76,68,74,31,36,25,32,57,87,84,63,81,59,91,73\n77,95,81,25,31,78,32,46,93,63,19,87,52\n57,95,78,87,93,84,63,19,66,59,91,73,42,64,48,79,54\n95,78,87,81,19,66,47,42,64,17,79,85,22\n72,34,73,54,98,79,17,47,49,94,44,89,42,85,48,91,82,22,29,64,59\n44,78,38,76,46,14,57,29,72,31,49,77,25,52,92,13,95,36,67,68,32,75,34\n91,48,22,89,47,64,82,73,21,34,85,44,42,54,59,38,72\n57,31,87,75,13,67,32,77,37,66,93\n67,92,14,76,77,74,13,31,36,25,32,57,95,78,87,93,63,81,19,66,37\n66,77,31,74,37,84,59,95,68,19,87,73,36,63,57,78,93,47,32\n52,76,68,36,32,95,87,81,66\n48,52,82,89,67,34,72,44,73,17,64,21,22,85,79,49,91,98,46\n85,59,22,46,89,72,29,44,47,17,42,48,64,38,94,34,54\n36,25,57,95,78,87,93,84,63,81,19,37,59,94,91,73,47,42,64,17,79\n31,32,57,95,87,84,63,59,94,73,47,42,64,17,48\n59,44,22,85,47,42,81,17,66,94,21,91,48,29,19,54,82\n13,14,72,25,75,21,34,38,52,74,76,92,68,89,46,36,77,29,67\n64,17,79,22,54,89,98,44,34,72,38,46,52,67,92,75,76\n49,42,85,29,98,94,79,47,38,54,22,46,89,34,21,44,64,82,59,48,72,73,91\n79,21,98,29,34,49,38,46,52,67,92,14,76,68,77\n38,46,67,92,14,76,68,74,31,36,25,32,57,95,78,93,84,63,81\n91,47,42,64,17,79,85,22,54,21,89,98,29,34,72,49,38,46,67\n81,76,59,87,84,66,32,78,95,63,74,25,75,14,94,19,31,36,77,57,68,93,37\n54,22,59,37,95,57,17,19,64,42,84,66,91,93,81,78,47,79,87,94,48,63,73\n87,59,64,54,21,82,89\n72,49,46,52,67,92,75,76,25,57,95,93,84\n46,75,74,25,32,57,63\n89,94,21,98,17,54,22,91,44,49,79,82,48,66,34,47,72\n63,36,73,47,25,19,68,59,37,94,87,91,66,32,57\n52,66,87,19,68,95,13\n13,81,77,75,68,76,92,37,84,67,63\n98,38,68,92,74,77,29,34,85,75,82,72,44,46,21,13,89,67,22,52,14\n49,89,14,76,29,68,75,92,32,98,74,82,72\n84,36,57,37,94,25,76,68,32,59,81,87,75,77,95\n57,95,93,84,19,37,94,91,48\n95,78,13,93,68,81,31,36,77\n78,66,25,36,64,37,91,73,32,84,48,42,79,81,57,47,95\n85,22,54,72,38,52,67,14,13\n17,79,82,98,44,29,68\n46,44,42,17,98,94,54,72,48,22,79,73,29,47,91,59,21,82,34,64,49,85,89\n91,73,47,64,17,48,79,22,21,98,29,34,72,38,46,52,67\n75,76,74,36,32,57,78,93,84,63,81,66,37,59,94\n89,85,17,48,67,82,72,49,29\n75,74,87,93,19,94,91\n13,32,87,93,81,91,73,42,17\n37,64,85,54,82,72,38\n68,31,57,95,87,63,81,66,47\n77,81,87,38,63,13,74,67,14,31,46,32,36,92,93,68,76,57,52,78,75\n57,95,78,87,93,84,63,81,19,66,37,59,94,91,73,47,42,64,48,79,85,22,54\n63,81,66,37,59,94,91,73,47,64,48,79,85,22,54,21,82,89,98,44,29\n38,34,32,68,36,13,89,31,76,72,74,92,29,75,57\n64,82,89,34,44,38,54,98,47\n25,74,31,75,78,37,68,32,84,36,59,87,92,19,93,81,63,57,77,76,66\n37,93,95,87,19,79,17,42,85,32,22\n13,67,75,76,31,57,14,38,72,49,98,44,29,34,25,46,74,32,77,89,68,36,52\n81,47,79,63,54,42,87,17,37,59,66,64,93,85,82,73,91,19,84,21,48,94,22\n49,38,46,52,67,92,75,76,68,74,13,31,36,25,32,57,95,78,87,84,63";
}

public class PrintQueueTests(ITestOutputHelper outputHelper)
{
    [Fact]
    public void PrintQueueAnalyser_FunctionalCheck()
    {
        var result = PrintQueueAnalyser.Calculate(TestInput.Example, outputHelper);
        Assert.Equal(143, result);
    }


    [Fact]
    public void ScenarioOne()
    {
        var result = PrintQueueAnalyser.Calculate(TestInput.Input, outputHelper);
        
        outputHelper.WriteLine(result.ToString());
        
        Assert.True(result == 6034);
        
    }
}

public static class PrintQueueAnalyser
{
    public static int Calculate(string example, ITestOutputHelper outputHelper)
    {
        var (rules, updates) = Parse(example);
        
        return updates.Where(update => RulesMet(rules, update, outputHelper)).Sum(GetMiddleValueOf);
    }

    private static bool RulesMet(List<int[]> rules, int[] update, ITestOutputHelper outputHelper)
    {

        for (var i = 0; i < update.Length; i++)
        {
            var pageNumber = update[i];
            
            // get all rules starting with that page number;
            
            var relevantRules = rules.Where(x=> x[0] == pageNumber);

            foreach (var relevantRule in relevantRules)
            {
                if (update[..i].Contains(relevantRule[1]))
                {
                    return false;
                }
            }
        }
        return true;


    }

    private static int GetMiddleValueOf(int[] values)
    {
        // if say 5, remove 1
        var index = (values.Length - 1) / 2;
        return values[index];
    }

    private static (List<int[]> Rules, List<int[]> Updates) Parse(string example)
    {
        var sections = example.Split("\n\n");

        var rules = sections[0].Split("\n")
            .Select(x => x.Split(["|"], StringSplitOptions.RemoveEmptyEntries)
                .Select(int.Parse)
                .ToArray()).ToList();

        var updates = sections[1].Split("\n")
            .Select(x => x.Split([","], StringSplitOptions.RemoveEmptyEntries)
                .Select(int.Parse)
                .ToArray())
            .ToList();
        
        return (rules, updates);
    }
}